2025-01-02 16:10:53.357 +07:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7231/api/forgot-password/ForgotPassword - null null
2025-01-02 16:10:53.367 +07:00 [DBG] OPTIONS requests are not supported
2025-01-02 16:10:53.368 +07:00 [DBG] The request has an origin header: 'http://localhost:3334'.
2025-01-02 16:10:53.369 +07:00 [INF] CORS policy execution successful.
2025-01-02 16:10:53.370 +07:00 [DBG] The request is a preflight request.
2025-01-02 16:10:53.372 +07:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7231/api/forgot-password/ForgotPassword - 204 null null 15.2073ms
2025-01-02 16:10:53.376 +07:00 [INF] Request starting HTTP/2 POST https://localhost:7231/api/forgot-password/ForgotPassword - application/json 93
2025-01-02 16:10:53.383 +07:00 [DBG] POST requests are not supported
2025-01-02 16:10:53.384 +07:00 [DBG] The request has an origin header: 'http://localhost:3334'.
2025-01-02 16:10:53.385 +07:00 [INF] CORS policy execution successful.
2025-01-02 16:10:53.386 +07:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2025-01-02 16:10:53.388 +07:00 [DBG] 1 candidate(s) found for the request path '/api/forgot-password/ForgotPassword'
2025-01-02 16:10:53.389 +07:00 [DBG] Endpoint 'SavingAccount_BE.Controllers.ForgotPasswordController.ForgotPassword (SavingAccount_BE)' with route pattern 'api/forgot-password/ForgotPassword' is valid for the request path '/api/forgot-password/ForgotPassword'
2025-01-02 16:10:53.391 +07:00 [DBG] Request matched endpoint 'SavingAccount_BE.Controllers.ForgotPasswordController.ForgotPassword (SavingAccount_BE)'
2025-01-02 16:10:53.392 +07:00 [INF] Executing endpoint 'SavingAccount_BE.Controllers.ForgotPasswordController.ForgotPassword (SavingAccount_BE)'
2025-01-02 16:10:53.394 +07:00 [INF] Route matched with {action = "ForgotPassword", controller = "ForgotPassword"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] ForgotPassword(SavingAccount_BE.Model.ForgotPasswordDto) on controller SavingAccount_BE.Controllers.ForgotPasswordController (SavingAccount_BE).
2025-01-02 16:10:53.396 +07:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-01-02 16:10:53.398 +07:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-01-02 16:10:53.400 +07:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-01-02 16:10:53.403 +07:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-01-02 16:10:53.405 +07:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-01-02 16:10:53.406 +07:00 [DBG] Executing controller factory for controller SavingAccount_BE.Controllers.ForgotPasswordController (SavingAccount_BE)
2025-01-02 16:10:53.408 +07:00 [DBG] Executed controller factory for controller SavingAccount_BE.Controllers.ForgotPasswordController (SavingAccount_BE)
2025-01-02 16:10:53.411 +07:00 [DBG] Attempting to bind parameter 'model' of type 'SavingAccount_BE.Model.ForgotPasswordDto' ...
2025-01-02 16:10:53.412 +07:00 [DBG] Attempting to bind parameter 'model' of type 'SavingAccount_BE.Model.ForgotPasswordDto' using the name '' in request data ...
2025-01-02 16:10:53.414 +07:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonInputFormatter' for content type 'application/json'.
2025-01-02 16:10:53.415 +07:00 [DBG] Connection id "0HN9B1FAO42D9", Request id "0HN9B1FAO42D9:00000017": started reading request body.
2025-01-02 16:10:53.416 +07:00 [DBG] Connection id "0HN9B1FAO42D9", Request id "0HN9B1FAO42D9:00000017": done reading request body.
2025-01-02 16:10:53.417 +07:00 [DBG] JSON input formatter succeeded, deserializing to type 'SavingAccount_BE.Model.ForgotPasswordDto'
2025-01-02 16:10:53.418 +07:00 [DBG] Done attempting to bind parameter 'model' of type 'SavingAccount_BE.Model.ForgotPasswordDto'.
2025-01-02 16:10:53.419 +07:00 [DBG] Done attempting to bind parameter 'model' of type 'SavingAccount_BE.Model.ForgotPasswordDto'.
2025-01-02 16:10:53.421 +07:00 [DBG] Attempting to validate the bound parameter 'model' of type 'SavingAccount_BE.Model.ForgotPasswordDto' ...
2025-01-02 16:10:53.422 +07:00 [DBG] Done attempting to validate the bound parameter 'model' of type 'SavingAccount_BE.Model.ForgotPasswordDto'.
2025-01-02 16:10:53.425 +07:00 [DBG] Entity Framework Core 8.0.10 initialized 'SavingAccountDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.10' with options: None
2025-01-02 16:10:53.427 +07:00 [DBG] Creating DbConnection.
2025-01-02 16:10:53.427 +07:00 [DBG] Created DbConnection. (0ms).
2025-01-02 16:10:53.428 +07:00 [DBG] Opening connection to database 'User' on server 'localhost'.
2025-01-02 16:10:53.442 +07:00 [DBG] Opened connection to database 'User' on server 'localhost'.
2025-01-02 16:10:53.444 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-01-02 16:10:53.445 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-01-02 16:10:53.446 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (2ms).
2025-01-02 16:10:53.447 +07:00 [DBG] Executing DbCommand [Parameters=[@__normalizedEmail_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [a].[Id], [a].[AccessFailedCount], [a].[Address], [a].[Base64Image], [a].[BirthDate], [a].[City], [a].[ConcurrencyStamp], [a].[Email], [a].[EmailConfirmed], [a].[FullName], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[Nation], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[Province], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[NormalizedEmail] = @__normalizedEmail_0
2025-01-02 16:10:53.462 +07:00 [INF] Executed DbCommand (15ms) [Parameters=[@__normalizedEmail_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [a].[Id], [a].[AccessFailedCount], [a].[Address], [a].[Base64Image], [a].[BirthDate], [a].[City], [a].[ConcurrencyStamp], [a].[Email], [a].[EmailConfirmed], [a].[FullName], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[Nation], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[Province], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[NormalizedEmail] = @__normalizedEmail_0
2025-01-02 16:10:53.465 +07:00 [DBG] Context 'SavingAccountDbContext' started tracking 'ApplicationUser' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-01-02 16:10:53.466 +07:00 [DBG] Closing data reader to 'User' on server 'localhost'.
2025-01-02 16:10:53.467 +07:00 [DBG] A data reader for 'User' on server 'localhost' is being disposed after spending 2ms reading results.
2025-01-02 16:10:53.468 +07:00 [DBG] Closing connection to database 'User' on server 'localhost'.
2025-01-02 16:10:53.469 +07:00 [DBG] Closed connection to database 'User' on server 'localhost' (1ms).
2025-01-02 16:10:57.223 +07:00 [INF] Executed action SavingAccount_BE.Controllers.ForgotPasswordController.ForgotPassword (SavingAccount_BE) in 3816.6887ms
2025-01-02 16:10:57.225 +07:00 [INF] Executed endpoint 'SavingAccount_BE.Controllers.ForgotPasswordController.ForgotPassword (SavingAccount_BE)'
2025-01-02 16:10:57.226 +07:00 [ERR] HTTP POST /api/forgot-password/ForgotPassword responded 500 in 3840.2607 ms
System.Net.Mail.SmtpException: The SMTP server requires a secure connection or the client was not authenticated. The server response was: 5.7.0 Authentication Required. For more information, go to
   at System.Net.Mail.MailCommand.CheckResponse(SmtpStatusCode statusCode, String response)
   at System.Net.Mail.MailCommand.EndSend(IAsyncResult result)
   at System.Net.Mail.SendMailAsyncResult.SendMailFromCompleted(IAsyncResult result)
--- End of stack trace from previous location ---
   at System.Net.Mail.SendMailAsyncResult.End(IAsyncResult result)
   at System.Net.Mail.SmtpClient.SendMailCallback(IAsyncResult result)
--- End of stack trace from previous location ---
   at SavingAccount_BE.Service.MailSender.EmailSender.SendEmailAsync(String email, String subject, String message) in D:\SavingAccountBECon\SavingAccount_BE\SavingAccount_BE\Service\MailSender\EmailSender.cs:line 38
   at SavingAccount_BE.Controllers.ForgotPasswordController.ForgotPassword(ForgotPasswordDto model) in D:\SavingAccountBECon\SavingAccount_BE\SavingAccount_BE\Controllers\ForgotPasswordController.cs:line 62
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.TaskOfIActionResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Serilog.AspNetCore.RequestLoggingMiddleware.Invoke(HttpContext httpContext)
2025-01-02 16:10:57.238 +07:00 [ERR] An unhandled exception has occurred while executing the request.
System.Net.Mail.SmtpException: The SMTP server requires a secure connection or the client was not authenticated. The server response was: 5.7.0 Authentication Required. For more information, go to
   at System.Net.Mail.MailCommand.CheckResponse(SmtpStatusCode statusCode, String response)
   at System.Net.Mail.MailCommand.EndSend(IAsyncResult result)
   at System.Net.Mail.SendMailAsyncResult.SendMailFromCompleted(IAsyncResult result)
--- End of stack trace from previous location ---
   at System.Net.Mail.SendMailAsyncResult.End(IAsyncResult result)
   at System.Net.Mail.SmtpClient.SendMailCallback(IAsyncResult result)
--- End of stack trace from previous location ---
   at SavingAccount_BE.Service.MailSender.EmailSender.SendEmailAsync(String email, String subject, String message) in D:\SavingAccountBECon\SavingAccount_BE\SavingAccount_BE\Service\MailSender\EmailSender.cs:line 38
   at SavingAccount_BE.Controllers.ForgotPasswordController.ForgotPassword(ForgotPasswordDto model) in D:\SavingAccountBECon\SavingAccount_BE\SavingAccount_BE\Controllers\ForgotPasswordController.cs:line 62
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.TaskOfIActionResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Serilog.AspNetCore.RequestLoggingMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddlewareImpl.Invoke(HttpContext context)
2025-01-02 16:10:57.243 +07:00 [DBG] 'SavingAccountDbContext' disposed.
2025-01-02 16:10:57.244 +07:00 [DBG] Disposing connection to database 'User' on server 'localhost'.
2025-01-02 16:10:57.246 +07:00 [DBG] Disposed connection to database '' on server '' (1ms).
2025-01-02 16:10:57.247 +07:00 [INF] Request finished HTTP/2 POST https://localhost:7231/api/forgot-password/ForgotPassword - 500 null text/plain; charset=utf-8 3871.3732ms
